# Purpose
# To manage the cluster setup.
#
# This script will be passed the following arguments by cloudlab:
# master:  cl-setup.sh MASTER_NAME SLAVE_NAME_PREFIX NUM_SLAVES
# slave:   cl-setup.sh SLAVE_NAME_PREFIX
#
# The ansible-setup.sh script will take the first argument and check if it is "master" or "head", which
# are common names we've used for the master node's name.  If there is a match it will assume it is 
# running on the master or head node, otherwise it will assume that it is running on a slave node.
#
# Either way the first argument will determine the scripts execution path.

# setup ansible
./ansible-setup.sh  $1

# setup / format the disk drive (not hadoop formatting).
./init-hdfs.sh

# prepare hadoop for installation
mkdir -p /home/ansible/ansible
mv /tmp/ansible-master /home/ansible/ansible
